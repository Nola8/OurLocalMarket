<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - Our Local Market</title>
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/admin-style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="admin-app-container">
      <aside class="admin-sidebar" id="sidebar">
        <div class="admin-logo">
          <h2>
            <i class="fas fa-chart-line"></i>
            <span id="logoText">Admin Panel</span>
          </h2>
          <div class="admin-role">Administrator</div>
        </div>

        <nav class="admin-nav-menu">
          <a href="admin-dashboard.html" class="admin-nav-item active">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </a>
          <a href="admin-products.html" class="admin-nav-item">
            <i class="fas fa-box"></i>
            <span>Products</span>
            <span class="badge" id="productCount">24</span>
          </a>
          <a href="admin-orders.html" class="admin-nav-item">
            <i class="fas fa-shopping-cart"></i>
            <span>Orders</span>
            <span class="badge" id="orderCount">15</span>
          </a>
          <a href="admin-users.html" class="admin-nav-item">
            <i class="fas fa-users"></i>
            <span>Users</span>
            <span class="badge" id="userCount">42</span>
          </a>
          <a href="admin-farmers.html" class="admin-nav-item">
            <i class="fas fa-tractor"></i>
            <span>Farmers</span>
          </a>
          <a href="admin-categories.html" class="admin-nav-item">
            <i class="fas fa-tags"></i>
            <span>Categories</span>
          </a>
          <a href="admin-reports.html" class="admin-nav-item">
            <i class="fas fa-chart-bar"></i>
            <span>Reports</span>
          </a>
          <a href="admin-settings.html" class="admin-nav-item">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </nav>

        <div
          class="user-info"
          style="
            margin-top: auto;
            padding: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
          "
        >
          <div class="user-avatar">
            <img
              src="https://ui-avatars.com/api/?name=Admin&background=4a6fa5&color=fff"
              alt="Admin"
              id="adminAvatar"
            />
          </div>
          <div class="user-details">
            <h4 id="adminName">Admin User</h4>
            <p id="adminEmail">admin@localmarket.com</p>
            <span class="status online">● Online</span>
          </div>
        </div>
      </aside>

      <main class="admin-main-content" id="mainContent">
        <header class="admin-topbar">
          <button class="admin-toggle-sidebar" id="toggleSidebar">
            <i class="fas fa-bars"></i>
          </button>

          <div class="admin-topbar-title">
            <h1>Dashboard Overview</h1>
            <p style="color: #666; font-size: 0.9rem; margin: 5px 0 0">
              Welcome back, Admin
            </p>
          </div>

          <div class="admin-topbar-actions">
            <div class="admin-notifications" onclick="showNotifications()">
              <i class="fas fa-bell"></i>
              <span class="notification-count" id="notificationCount">3</span>
            </div>

            <div class="admin-user-menu" onclick="toggleUserMenu()">
              <img
                src="https://ui-avatars.com/api/?name=Admin&background=4a6fa5&color=fff"
                alt="User"
                class="admin-user-avatar"
              />
              <div class="admin-user-info">
                <h4 id="headerAdminName">Admin User</h4>
                <p>Administrator</p>
              </div>
              <i class="fas fa-chevron-down"></i>
            </div>
          </div>
        </header>

        <div class="admin-dashboard-content">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-header">
                <div>
                  <h3 class="stat-title">Total Users</h3>
                  <div class="stat-value" id="totalUsers">1,248</div>
                </div>
                <div class="stat-icon users">
                  <i class="fas fa-users"></i>
                </div>
              </div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i> 12.5% from last month
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <div>
                  <h3 class="stat-title">Total Products</h3>
                  <div class="stat-value" id="totalProducts">156</div>
                </div>
                <div class="stat-icon products">
                  <i class="fas fa-box"></i>
                </div>
              </div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i> 8.2% from last month
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <div>
                  <h3 class="stat-title">Today's Orders</h3>
                  <div class="stat-value" id="todayOrders">42</div>
                </div>
                <div class="stat-icon orders">
                  <i class="fas fa-shopping-cart"></i>
                </div>
              </div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i> 15.3% from yesterday
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-header">
                <div>
                  <h3 class="stat-title">Revenue</h3>
                  <div class="stat-value" id="totalRevenue">₦245,860</div>
                </div>
                <div class="stat-icon revenue">
                  <i class="fas fa-money-bill-wave"></i>
                </div>
              </div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i> 22.1% from last month
              </div>
            </div>
          </div>

          <div class="charts-grid">
            <div class="chart-card">
              <div class="chart-header">
                <h3 class="chart-title">Sales Overview</h3>
                <select class="chart-select" id="salesPeriod">
                  <option value="week">This Week</option>
                  <option value="month" selected>This Month</option>
                  <option value="year">This Year</option>
                </select>
              </div>
              <div class="chart-container">
                <canvas id="salesChart"></canvas>
              </div>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3 class="chart-title">User Growth</h3>
                <select class="chart-select" id="growthPeriod">
                  <option value="month" selected>Last 6 Months</option>
                  <option value="year">Last 2 Years</option>
                </select>
              </div>
              <div class="chart-container">
                <canvas id="userGrowthChart"></canvas>
              </div>
            </div>
          </div>

          <div class="recent-orders">
            <div class="section-header">
              <h3 class="section-title">Recent Orders</h3>
              <button class="view-all-btn" onclick="viewAllOrders()">
                View All
              </button>
            </div>
            <table class="orders-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Date</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="ordersTableBody">
                <!-- Orders will be populated by JavaScript -->
              </tbody>
            </table>
          </div>

          <div class="recent-orders">
            <div class="section-header">
              <h3 class="section-title">Top Selling Products</h3>
              <button class="view-all-btn" onclick="viewAllProducts()">
                View All
              </button>
            </div>
            <div class="top-products-grid" id="topProductsGrid"></div>
          </div>

          <div class="recent-orders">
            <div class="section-header">
              <h3 class="section-title">Quick Actions</h3>
            </div>
            <div class="quick-actions-grid">
              <div class="action-btn" onclick="addNewProduct()">
                <i class="fas fa-plus-circle"></i>
                <span>Add New Product</span>
              </div>
              <div class="action-btn" onclick="manageUsers()">
                <i class="fas fa-user-cog"></i>
                <span>Manage Users</span>
              </div>
              <div class="action-btn" onclick="viewReports()">
                <i class="fas fa-chart-pie"></i>
                <span>Generate Reports</span>
              </div>
              <div class="action-btn" onclick="systemSettings()">
                <i class="fas fa-sliders-h"></i>
                <span>System Settings</span>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <div class="admin-modal" id="notificationsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Notifications</h3>
          <button class="modal-close" onclick="closeNotifications()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div id="notificationsList">
            <!-- Notifications will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <div
      class="user-menu-dropdown"
      id="userMenuDropdown"
      style="
        display: none;
        position: absolute;
        top: 70px;
        right: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        min-width: 200px;
        overflow: hidden;
      "
    >
      <a
        href="admin-profile.html"
        class="dropdown-item"
        style="
          display: block;
          padding: 12px 16px;
          color: #333;
          text-decoration: none;
          border-bottom: 1px solid #eee;
        "
      >
        <i class="fas fa-user" style="margin-right: 10px"></i>My Profile
      </a>
      <a
        href="admin-settings.html"
        class="dropdown-item"
        style="
          display: block;
          padding: 12px 16px;
          color: #333;
          text-decoration: none;
          border-bottom: 1px solid #eee;
        "
      >
        <i class="fas fa-cog" style="margin-right: 10px"></i>Settings
      </a>
      <a
        href="#"
        class="dropdown-item"
        onclick="logout()"
        style="
          display: block;
          padding: 12px 16px;
          color: #dc3545;
          text-decoration: none;
        "
      >
        <i class="fas fa-sign-out-alt" style="margin-right: 10px"></i>Logout
      </a>
    </div>

    <script src="js/admin-dashboard.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        initDashboard();

        loadDashboardData();

        setupEventListeners();
      });
    </script>
  </body>
</html>
